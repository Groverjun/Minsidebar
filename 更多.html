<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>移动端返回顶部 - 何问起</title>
		<base target="_blank" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta charset="utf-8" />
		<style>
			#tophovertree {
				display: block;
				position: fixed;
				width: 36px;
				height: 36px;
				right: 20px;
				bottom: 20px;
				cursor: pointer;
				background-image: url(http://hovertree.com/texiao/mobile/6/tophovertree.gif);
				opacity: 0.9;
				display: none
			}
			
			a {
				color: blue
			}
		</style>
		<script src="http://hovertree.com/ziyuan/jquery/jquery-1.11.3.min.js"></script>
	</head>

	<body>
		<div style="height:500px;width:100%;">1
			<br />请向下滚动页面，你将会看到返回顶部的按钮。<br />
			<a href="http://hovertree.com/h/bjae/ve3erni6.htm">原文</a>
			<a href="http://hovertree.com/menu/jquery/">jQuery</a>
			<a href="http://hovertree.com">首页</a>
			<a href="http://hovertree.com/texiao/">特效</a>
		</div>
		<div style="height:500px;width:100%;">2何问起</div>
		<div style="height:500px;width:100%;">3</div>
		<div style="height:500px;width:100%;">4</div>
		<div style="height:500px;width:100%;">5</div>
		<div style="height:500px;width:100%;">6 柯乐义</div>
		<div style="height:500px;width:100%;">7</div>
		<div style="height:500px;width:100%;">8 keleyi</div>
		<div style="height:500px;width:100%;">9</div>
		<span id="tophovertree" title="返回顶部"></span>
		<script src="http://hovertree.com/texiao/mobile/6/topHovertree.js"></script>
		<script>
			$(function() {
				initTopHoverTree("tophov" + "ertree", 30, 30, 10);
			})
		</script>
	</body>

</html>
<script type="text/javascript">
function initTopHoverTree(hvtid, times, right, bottom) {
	$("#" + hvtid).css("right", right).css("bottmo", bottom);
	$("#tophovertree").on("click", function() {
		goTopHovetree(times);
	})

	$(window).scroll(function() {
		if($(window).scrollTop() > 268) {
			$("#" + hvtid).fadeIn(100);
		} else {
			$("#" + hvtid).fadeOut(100);
		}
	});
}
initTopHoverTree("tophovertree",30,30,10)
//返回顶部动画
//goTop(500);//500ms内滚回顶部
function goTopHovetree(times) {
	if(!!!times) {
		$(window).scrollTop(0);
		return;
	}

	var sh = $('body').scrollTop(); //移动总距离
	var inter = 13.333; //ms,每次移动间隔时间
	var forCount = Math.ceil(times / inter); //移动次数
	var stepL = Math.ceil(sh / forCount); //移动步长
	var timeId = null;

	function aniHovertree() {
		!!timeId && clearTimeout(timeId);
		timeId = null;
		//console.log($('body').scrollTop());
		if($('body').scrollTop() <= 0 || forCount <= 0) { //移动端判断次数好些，因为移动端的scroll事件触发不频繁，有可能检测不到有<=0的情况
			$('body').scrollTop(0);
			return;
		}
		forCount--;
		sh -= stepL;
		$('body').scrollTop(sh);
		timeId = setTimeout(function() {
			aniHovertree();
		}, inter);
	}
	aniHovertree();
}
</script>


